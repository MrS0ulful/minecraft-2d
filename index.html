<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2D Minecraft</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase 9 (compat –≤–µ—Ä—Å–∏—è –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã) -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
</head>
<body>
    <div class="container">
        <!-- –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
        <div id="auth-screen" class="screen active">
            <div class="auth-container">
                <h1>2D Minecraft</h1>
                
                <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
                <div class="auth-form" id="login-form">
                    <h2>–í—Ö–æ–¥ –≤ –∏–≥—Ä—É</h2>
                    <div class="form-group">
                        <input type="email" id="login-email" placeholder="–í–∞—à email" required>
                        <span class="error" id="login-email-error"></span>
                    </div>
                    <div class="form-group">
                        <input type="password" id="login-password" placeholder="–í–∞—à –ø–∞—Ä–æ–ª—å" required>
                        <span class="error" id="login-password-error"></span>
                    </div>
                    <button id="login-btn" onclick="login()">–í–æ–π—Ç–∏ –≤ –∏–≥—Ä—É</button>
                    <div class="auth-links">
                        <p>–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" onclick="showRegister()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>
                        <p class="demo-info">–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ: test@test.com / 123456</p>
                    </div>
                </div>
                
                <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
                <div class="auth-form" id="register-form" style="display: none;">
                    <h2>–°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞</h2>
                    <div class="form-group">
                        <input type="text" id="register-username" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞" required maxlength="20">
                        <span class="error" id="register-username-error"></span>
                    </div>
                    <div class="form-group">
                        <input type="email" id="register-email" placeholder="Email" required>
                        <span class="error" id="register-email-error"></span>
                    </div>
                    <div class="form-group">
                        <input type="password" id="register-password" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)" required minlength="6">
                        <span class="error" id="register-password-error"></span>
                    </div>
                    <button id="register-btn" onclick="register()">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
                    <div class="auth-links">
                        <p>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" onclick="showLogin()">–í–æ–π—Ç–∏</a></p>
                    </div>
                </div>
                
                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–≥—Ä–µ -->
                <div class="game-info">
                    <h3>üî• –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏–≥—Ä—ã:</h3>
                    <ul>
                        <li>üéÆ 2D –≥–µ–π–º–ø–ª–µ–π –≤ —Å—Ç–∏–ª–µ Minecraft</li>
                        <li>üë• –°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥–∞</li>
                        <li>üì¶ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏ —Å–∏—Å—Ç–µ–º–∞ –∫—Ä–∞—Ñ—Ç–∞</li>
                        <li>üí¨ –ß–∞—Ç —Å –∏–≥—Ä–æ–∫–∞–º–∏</li>
                        <li>üíæ –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</li>
                        <li>üåç –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –º–∏—Ä–∞</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∏–≥—Ä—ã -->
        <div id="game-screen" class="screen">
            <!-- –®–∞–ø–∫–∞ –∏–≥—Ä—ã -->
            <header class="game-header">
                <div class="header-left">
                    <div class="player-card">
                        <div class="player-avatar">üë§</div>
                        <div class="player-details">
                            <h2 id="player-name">–ò–≥—Ä–æ–∫</h2>
                            <div class="player-level">
                                <span class="level-icon">‚≠ê</span>
                                <span>–£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span></span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="header-center">
                    <div class="game-stats">
                        <div class="stat health">
                            <span class="stat-icon">‚ù§Ô∏è</span>
                            <div class="stat-bar">
                                <div class="stat-fill" id="health-bar" style="width: 100%"></div>
                            </div>
                            <span class="stat-value" id="health-value">100/100</span>
                        </div>
                        <div class="stat food">
                            <span class="stat-icon">üçñ</span>
                            <div class="stat-bar">
                                <div class="stat-fill" id="food-bar" style="width: 100%"></div>
                            </div>
                            <span class="stat-value" id="food-value">100/100</span>
                        </div>
                    </div>
                </div>
                
                <div class="header-right">
                    <button class="btn btn-logout" onclick="logout()">
                        <span class="btn-icon">üö™</span>
                        –í—ã–π—Ç–∏
                    </button>
                    <button class="btn btn-save" onclick="saveGameManual()">
                        <span class="btn-icon">üíæ</span>
                        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                    </button>
                </div>
            </header>

            <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ -->
            <main class="game-main">
                <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ -->
                <div class="game-field">
                    <canvas id="game-canvas" width="1000" height="600"></canvas>
                    <div class="game-tips">
                        <p>üîÑ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ <kbd>WASD</kbd> –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è, <kbd>SPACE</kbd> –¥–ª—è –ø—Ä—ã–∂–∫–∞</p>
                        <p>üõ†Ô∏è <kbd>–õ–ö–ú</kbd> - —Ä–∞–∑—Ä—É—à–∞—Ç—å, <kbd>–ü–ö–ú</kbd> - —Å—Ç–∞–≤–∏—Ç—å –±–ª–æ–∫–∏</p>
                        <p>üéí –ù–∞–∂–º–∏—Ç–µ —Ü–∏—Ñ—Ä—ã <kbd>1-9</kbd> –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ª–æ—Ç–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è</p>
                    </div>
                </div>
                
                <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
                <aside class="game-sidebar">
                    <!-- –ì–æ—Ä—è—á–∞—è –ø–∞–Ω–µ–ª—å -->
                    <div class="hotbar-container">
                        <h3>üéí –ì–æ—Ä—è—á–∞—è –ø–∞–Ω–µ–ª—å</h3>
                        <div class="hotbar" id="hotbar">
                            <div class="hotbar-slot active" data-slot="0">
                                <div class="slot-content">üü´</div>
                                <div class="slot-number">1</div>
                                <div class="slot-count">10</div>
                            </div>
                            <div class="hotbar-slot" data-slot="1">
                                <div class="slot-content">ü™µ</div>
                                <div class="slot-number">2</div>
                                <div class="slot-count">5</div>
                            </div>
                            <div class="hotbar-slot" data-slot="2">
                                <div class="slot-content">ü™®</div>
                                <div class="slot-number">3</div>
                                <div class="slot-count">3</div>
                            </div>
                            <div class="hotbar-slot" data-slot="3">
                                <div class="slot-content">ü™µ</div>
                                <div class="slot-number">4</div>
                                <div class="slot-count">0</div>
                            </div>
                            <div class="hotbar-slot" data-slot="4">
                                <div class="slot-content"></div>
                                <div class="slot-number">5</div>
                                <div class="slot-count">0</div>
                            </div>
                            <div class="hotbar-slot" data-slot="5">
                                <div class="slot-content"></div>
                                <div class="slot-number">6</div>
                                <div class="slot-count">0</div>
                            </div>
                            <div class="hotbar-slot" data-slot="6">
                                <div class="slot-content"></div>
                                <div class="slot-number">7</div>
                                <div class="slot-count">0</div>
                            </div>
                            <div class="hotbar-slot" data-slot="7">
                                <div class="slot-content"></div>
                                <div class="slot-number">8</div>
                                <div class="slot-count">0</div>
                            </div>
                            <div class="hotbar-slot" data-slot="8">
                                <div class="slot-content"></div>
                                <div class="slot-number">9</div>
                                <div class="slot-count">0</div>
                            </div>
                        </div>
                        <div class="hotbar-info">
                            –í—ã–±—Ä–∞–Ω: <span id="selected-item">–ó–µ–º–ª—è (üü´)</span>
                        </div>
                    </div>
                    
                    <!-- –ö—Ä–∞—Ñ—Ç -->
                    <div class="crafting-container">
                        <h3>‚öíÔ∏è –ö—Ä–∞—Ñ—Ç</h3>
                        <div class="crafting-recipes">
                            <div class="recipe" onclick="craftItem('wood_sword')">
                                <div class="recipe-result">üó°Ô∏è</div>
                                <div class="recipe-cost">
                                    <span class="cost-item">ü™µ√ó4</span>
                                </div>
                                <div class="recipe-name">–î–µ—Ä–µ–≤—è–Ω–Ω—ã–π –º–µ—á</div>
                                <button class="recipe-btn">–°–æ–∑–¥–∞—Ç—å</button>
                            </div>
                            <div class="recipe" onclick="craftItem('stone_pickaxe')">
                                <div class="recipe-result">‚õèÔ∏è</div>
                                <div class="recipe-cost">
                                    <span class="cost-item">ü™®√ó3</span>
                                    <span class="cost-item">ü™µ√ó2</span>
                                </div>
                                <div class="recipe-name">–ö–∞–º–µ–Ω–Ω–∞—è –∫–∏—Ä–∫–∞</div>
                                <button class="recipe-btn">–°–æ–∑–¥–∞—Ç—å</button>
                            </div>
                            <div class="recipe" onclick="craftItem('wood_wall')">
                                <div class="recipe-result">üß±</div>
                                <div class="recipe-cost">
                                    <span class="cost-item">ü™µ√ó6</span>
                                </div>
                                <div class="recipe-name">–î–µ—Ä–µ–≤—è–Ω–Ω–∞—è —Å—Ç–µ–Ω–∞</div>
                                <button class="recipe-btn">–°–æ–∑–¥–∞—Ç—å</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
                    <div class="controls-container">
                        <h3>üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h3>
                        <div class="controls-grid">
                            <div class="control">
                                <kbd>W</kbd>
                                <span>–í–ø–µ—Ä–µ–¥ / –ü—Ä—ã–∂–æ–∫</span>
                            </div>
                            <div class="control">
                                <kbd>A</kbd>
                                <span>–í–ª–µ–≤–æ</span>
                            </div>
                            <div class="control">
                                <kbd>S</kbd>
                                <span>–ù–∞–∑–∞–¥</span>
                            </div>
                            <div class="control">
                                <kbd>D</kbd>
                                <span>–í–ø—Ä–∞–≤–æ</span>
                            </div>
                            <div class="control">
                                <kbd>–ü—Ä–æ–±–µ–ª</kbd>
                                <span>–ü—Ä—ã–∂–æ–∫</span>
                            </div>
                            <div class="control">
                                <kbd>–õ–ö–ú</kbd>
                                <span>–†–∞–∑—Ä—É—à–∏—Ç—å</span>
                            </div>
                            <div class="control">
                                <kbd>–ü–ö–ú</kbd>
                                <span>–ü–æ—Å—Ç—Ä–æ–∏—Ç—å</span>
                            </div>
                            <div class="control">
                                <kbd>1-9</kbd>
                                <span>–°–ª–æ—Ç—ã</span>
                            </div>
                            <div class="control">
                                <kbd>ESC</kbd>
                                <span>–ü–∞—É–∑–∞</span>
                            </div>
                        </div>
                    </div>
                </aside>
            </main>

            <!-- –ß–∞—Ç -->
            <footer class="game-footer">
                <div class="chat-container">
                    <div class="chat-header">
                        <h3>üí¨ –ß–∞—Ç —Å –∏–≥—Ä–æ–∫–∞–º–∏</h3>
                        <span class="online-count">–û–Ω–ª–∞–π–Ω: <span id="online-count">1</span></span>
                    </div>
                    <div class="chat-messages" id="chat-messages">
                        <div class="system-message">
                            üéÆ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ 2D Minecraft! –ù–∞—á–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ.
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" 
                               id="chat-input" 
                               placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." 
                               maxlength="200"
                               onkeypress="handleChatKeyPress(event)">
                        <button class="chat-btn" onclick="sendChatMessage()">
                            <span class="btn-icon">üì§</span>
                            –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                        </button>
                    </div>
                </div>
            </footer>
        </div>
        
        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <div id="notification" class="notification hidden">
            <span id="notification-text"></span>
        </div>
        
        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
        <div id="loading" class="loading hidden">
            <div class="loading-spinner"></div>
            <div class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="auth.js"></script>
    <script src="game.js"></script>
    
    <!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è -->
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('2D Minecraft –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...');
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≥–æ—Ä—è—á–µ–π –ø–∞–Ω–µ–ª–∏
            document.querySelectorAll('.hotbar-slot').forEach(slot => {
                slot.addEventListener('click', function() {
                    const slotIndex = parseInt(this.getAttribute('data-slot'));
                    selectHotbarSlot(slotIndex);
                });
            });
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–≥—Ä—É–∂–µ–Ω—ã –ª–∏ Firebase
            if (typeof firebase === 'undefined') {
                showNotification('–û—à–∏–±–∫–∞: Firebase –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω', 'error');
            } else {
                console.log('Firebase —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω');
            }
        });
        
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            const text = document.getElementById('notification-text');
            
            text.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.remove('hidden');
            
            setTimeout(() => {
                notification.classList.add('hidden');
            }, 3000);
        }
        
        function showLoading(show) {
            const loading = document.getElementById('loading');
            if (show) {
                loading.classList.remove('hidden');
            } else {
                loading.classList.add('hidden');
            }
        }
        
        function saveGameManual() {
            if (typeof saveGame === 'function') {
                saveGame();
                showNotification('–ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!', 'success');
            }
        }
        
        // –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
        window.showNotification = showNotification;
        window.showLoading = showLoading;
        window.saveGameManual = saveGameManual;
    </script>
</body>
</html>
